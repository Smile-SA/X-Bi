(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e7b82c6"],{"0e06":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"normal-case tracking-normal"},[e("a",{staticClass:"btn btn-sm btn-outline-primary text-capitalize",on:{click:function(e){return e.preventDefault(),t.show.apply(null,arguments)}}},[e("font-awesome-icon",{attrs:{icon:["fas","fa-plus-square"]}}),t._v(" add "+t._s(t.structureType))],1),e("modal",{staticClass:"white-space-initial",attrs:{name:"view-add"+t.structureType,height:"auto",resizable:!0,width:"25%"}},[e("div",{staticClass:"modal-body"},[!0===t.showForm?t._t("body",(function(){return[e("FormulateForm",{attrs:{name:"add-form"+t.structureType},on:{submit:function(e){return t.submitForm()}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[e("h3",[t._v(t._s("add "+t.structureType+" form"))]),t._l(t.form,(function(s){return e(s.component,t._b({directives:[{name:"show",rawName:"v-show",value:t.showInput(s),expression:"showInput(input)"}],key:s.name,tag:"component",on:{change:function(e){return t.changeForm(s)}}},"component",s,!1))})),e("FormulateInput",{attrs:{type:"submit",label:"Submit"}}),e("FormulateInput",{attrs:{type:"button",label:"Cancel","data-ghost":""},on:{click:t.cancel}})],2)]})):t._e(),t.message.length>0?e("div",{staticClass:"col-md-12"},[e("div",{class:[t.errors.submit?"alert alert-danger":"alert alert-success","desable"],attrs:{role:"alert"}},[t._v(" "+t._s(t.message)+" ")])]):t._e()],2)])],1)},a=[],o=s("73b5"),i=s("97e3"),n=s("d5a1");const m=n["apiInfo"];var u={name:"add",components:{},props:["structureType","refreshFunction","id","url"],data(){return{form:[],model:{},showForm:!1,errors:{},message:"",controls:{}}},computed:{lookModel(){return this.model}},methods:{async show(){this.errors={},this.message="",this.form=await this.getForm(),this.showForm=!0,await this.$modal.show("view-add"+this.structureType)},cancel(){this.errors={},this.message="",this.$formulate.reset("add-form"+this.structureType),this.$modal.hide("view-add"+this.structureType),this.showForm=!1,this.deleteDynamicInput()},async getForm(){return await o["getForm"](this.structureType)},async showInput(t){return await o["showInputInModel"](t,this.model)},submitForm(){"static"===m.dataType?(this.$emit("itemAdded",this.model),this.cancel()):(this.errors={},this.message="",i["generalAdd"](this.url,this.model).then(t=>{t.errors?this.errors.submit=!0:(this.deleteDynamicInput(),this.$formulate.reset("add-form"+this.structureType),this.errors.submit=!1),this.refreshFunction(),this.message=t.message}))},deleteDynamicInput(){let t=[];Object.keys(this.form).map(e=>{this.form[e].isDynamic&&!0===this.form[e].isDynamic&&t.push(e)}),this.form.length=this.form.length-t.length},changeForm(t){t.dynamicFields&&(this.deleteDynamicInput(),o["dynamicInputs"](this.form,this.model))}},watch:{lookModel(){o["updateValidation"](this.form,this.model)}},async beforeMount(){}},l=u,c=(s("ddfe"),s("2877")),h=Object(c["a"])(l,r,a,!1,null,"6cb9486f",null);e["default"]=h.exports},"972b":function(t,e,s){},ddfe:function(t,e,s){"use strict";s("972b")}}]);
//# sourceMappingURL=chunk-8e7b82c6.9c529648.js.map