(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd294"],{"2b8f":function(t,e,a){"use strict";a.r(e);var s=a("73b5"),i=a("97e3");e["default"]={data(){return{group:"hour",groupOptions:["hour","day","month","year"],queryData:{},dynamicDataSelectId:"",queryLink:"",additionalUrl:"",to:null,from:null,date:null,active:null,hover:!0,apiInfo:void 0,dynamicData:[],select:{models:{},styles:{}},structure:{card:{models:{},styles:{}},chart:{models:{},styles:{}}}}},methods:{showDatePicker(){return null!==this.active},showGroup(){return null!==this.date&&null!==this.active},async setDynamicDataSelect(t,e){this.active=t.target.value,"ro"===this.apiInfo.mode?this.additionalUrl=e+"/"+this.active:(this.additionalUrl="",this.queryData[e]=this.active),"static"===this.apiInfo.dataType&&(this.additionalUrl="/X-Bi/mockData/"+this.additionalUrl),this.setDate(this.date)},async setDate(t){t&&(this.date=t,await this.setModelsData(),await s["refreshDate"](this.date,this))},async setGroup(t){this.group=t.target.value,this.setDate(this.date)},setModelsData(){this.structure.card={models:{},styles:{}},this.structure.chart={models:{},styles:{}}},getStructureModelsData(){let t=s["getSelectModels"](this.$route.name);null!=t.data&&!0!==t.data.errors?t.data.total>0&&(this.select.models=t.data.results):(this.select.models={},this.select.styles={})},todayFunction(){const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1,0,0),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+0,23,59);return{start:e,end:a}},setDefaultDate(t,e,a){var s,i=new Date,l=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate()));return t>0&&(s=new Date(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate()-t))),e>0&&(s=new Date(Date.UTC(i.getFullYear(),i.getMonth()-e,i.getDate()))),a>0&&(s=new Date(Date.UTC(i.getFullYear()-a,i.getMonth(),i.getDate()))),{start:s,end:l}},async getDynamicSelectData(){this.active=null;let t=!1;this.select={},await this.getStructureModelsData(),void 0!=this.select.models&&Object.keys(this.select.models).length>0&&await Object.keys(this.select.models).map(e=>{"dynamic"===this.select.models[e].type&&(t=!0,this.queryLink=this.select.models[e].query,i["getJsonData"](this.select.models[e]).then(t=>{t.total>0?this.dynamicData=t.results:this.dynamicData=[]}))}),t||(this.active=!0)}},beforeMount(){this.date=this.to=this.from=this.active=null,this.queryData={},this.dynamicData=[],this.hover=!0,this.dynamicDataSelectId=this.queryLink=this.additionalUrl="",this.select={models:{},styles:{}},this.structure={card:{models:{},styles:{}},chart:{models:{},styles:{}}},this.apiInfo=s["getApiInfo"](),this.setModelsData(),this.getDynamicSelectData(),i["titleBoxRender"](this),"Overall"===this.$route.name&&(this.active="",this.date=this.todayFunction(),this.setDate(this.date))},watch:{$route(){this.date=this.to=this.from=this.active=null,this.queryData={},this.dynamicData=[],this.hover=!0,this.dynamicDataSelectId=this.queryLink=this.additionalUrl="",this.select={models:{},styles:{}},this.structure={card:{models:{},styles:{}},chart:{models:{},styles:{}}},this.apiInfo=s["getApiInfo"](),i["titleBoxRender"](this),this.getDynamicSelectData(),this.setModelsData(),"Overall"===this.$route.name&&(this.active="",this.date=this.todayFunction(),this.setDate(this.date))}}}}}]);
//# sourceMappingURL=chunk-2d0bd294.d59d1d85.js.map