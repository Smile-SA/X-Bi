(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6180ff18","chunk-5c531fd6","chunk-8e7b82c6","chunk-4b015725","chunk-20e27b8e"],{"0e06":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"normal-case tracking-normal"},[e("a",{staticClass:"btn btn-sm btn-outline-primary text-capitalize",on:{click:function(e){return e.preventDefault(),t.show.apply(null,arguments)}}},[e("font-awesome-icon",{attrs:{icon:["fas","fa-plus-square"]}}),t._v(" add "+t._s(t.structureType))],1),e("modal",{staticClass:"white-space-initial",attrs:{name:"view-add"+t.structureType,height:"auto",resizable:!0,width:"25%"}},[e("div",{staticClass:"modal-body"},[!0===t.showForm?t._t("body",(function(){return[e("FormulateForm",{attrs:{name:"add-form"+t.structureType},on:{submit:function(e){return t.submitForm()}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[e("h3",[t._v(t._s("add "+t.structureType+" form"))]),t._l(t.form,(function(a){return e(a.component,t._b({directives:[{name:"show",rawName:"v-show",value:t.showInput(a),expression:"showInput(input)"}],key:a.name,tag:"component",on:{change:function(e){return t.changeForm(a)}}},"component",a,!1))})),e("FormulateInput",{attrs:{type:"submit",label:"Submit"}}),e("FormulateInput",{attrs:{type:"button",label:"Cancel","data-ghost":""},on:{click:t.cancel}})],2)]})):t._e(),t.message.length>0?e("div",{staticClass:"col-md-12"},[e("div",{class:[t.errors.submit?"alert alert-danger":"alert alert-success","desable"],attrs:{role:"alert"}},[t._v(" "+t._s(t.message)+" ")])]):t._e()],2)])],1)},i=[],r=a("73b5"),n=a("97e3"),l=a("d5a1");const o=l["apiInfo"];var u={name:"add",components:{},props:["structureType","refreshFunction","id","url"],data(){return{form:[],model:{},showForm:!1,errors:{},message:"",controls:{}}},computed:{lookModel(){return this.model}},methods:{async show(){this.errors={},this.message="",this.form=await this.getForm(),this.showForm=!0,await this.$modal.show("view-add"+this.structureType)},cancel(){this.errors={},this.message="",this.$formulate.reset("add-form"+this.structureType),this.$modal.hide("view-add"+this.structureType),this.showForm=!1,this.deleteDynamicInput()},async getForm(){return await r["getForm"](this.structureType)},async showInput(t){return await r["showInputInModel"](t,this.model)},submitForm(){"static"===o.dataType?(this.$emit("itemAdded",this.model),this.cancel()):(this.errors={},this.message="",n["generalAdd"](this.url,this.model).then(t=>{t.errors?this.errors.submit=!0:(this.deleteDynamicInput(),this.$formulate.reset("add-form"+this.structureType),this.errors.submit=!1),this.refreshFunction(),this.message=t.message}))},deleteDynamicInput(){let t=[];Object.keys(this.form).map(e=>{this.form[e].isDynamic&&!0===this.form[e].isDynamic&&t.push(e)}),this.form.length=this.form.length-t.length},changeForm(t){t.dynamicFields&&(this.deleteDynamicInput(),r["dynamicInputs"](this.form,this.model))}},watch:{lookModel(){r["updateValidation"](this.form,this.model)}},async beforeMount(){}},c=u,d=(a("ddfe"),a("2877")),m=Object(d["a"])(c,s,i,!1,null,"6cb9486f",null);e["default"]=m.exports},"15a8":function(t,e,a){"use strict";a("3d48")},"25d3":function(t,e,a){},"3d48":function(t,e,a){},"52d6":function(t,e,a){"use strict";a("de94")},"584c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"session-action display-flex"},[t.$route.meta.crud.show?e("show-form",{staticClass:"m-r-xs",attrs:{data:t.data,url:t.$route.meta.crud.show.url,id:t.$route.meta.crud.show.id,value:t.data.id,refreshFunction:t.data.refreshFunction}}):t._e(),t.$route.meta.crud.delete?e("delete-form",{staticClass:"m-r-xs",attrs:{url:t.$route.meta.crud.delete.url,id:t.$route.meta.crud.delete.id,value:t.data.id,refreshFunction:t.data.refreshFunction}}):t._e()],1)},i=[],r=a("9b08"),n=a("ff13"),l={name:"url-action",components:{deleteForm:r["default"],showForm:n["default"]},props:["data"],data(){return{}},computed:{},mounted(){},methods:{}},o=l,u=(a("15a8"),a("2877")),c=Object(u["a"])(o,s,i,!1,null,"75d9a18e",null);e["default"]=c.exports},"62f5":function(t,e,a){"use strict";a("25d3")},"972b":function(t,e,a){},"98b6":function(t,e,a){"use strict";a.r(e);var s=a("584c"),i=a("97e3"),r=a("0e06"),n=a("bc3a"),l=a.n(n);e["default"]={name:"kpi-configuration",components:{addForm:r["default"]},props:[],data(){return{hover:!0,list:[],columns:[],nb:0}},computed:{bindings(){return{data:this.list,showDownloadButton:!1,columns:this.columns}}},methods:{async getList(){this.list=[];const t=localStorage.getItem(`x-bi:${this.$route.name}-list`),e=t?JSON.parse(t):await i["get"](this.$route.meta.crud.list.url);localStorage.setItem(`x-bi:${this.$route.name}-list`,JSON.stringify(e)),this.nb=e.total,Object.keys(e.results).map(t=>{let a={deleteTagIndex:3,colspan:2};this.columns=[],null!==this.$route.meta.crud.list.id&&""!==this.$route.meta.crud.list.id&&void 0!==this.$route.meta.crud.list.id?(a["id"]=e.results[t][this.$route.meta.crud.list.id].replace(this.$route.meta.crud.list.replace,""),Object.keys(e.results[t]).map(s=>{a[s]=e.results[t][s],"is_default"!==s&&this.columns.push({key:s,title:s.replaceAll("-"," ").replaceAll("_"," ")})}),a["refreshFunction"]=this.getList):(a["id"]=e.results[t].replace(this.$route.meta.crud.list.replace,""),a["name"]=e.results[t].replace(this.$route.meta.crud.list.replace,""),a["refreshFunction"]=this.getList,this.columns.push({key:"name",title:"name"})),this.columns.push({key:"Actions",component:s["default"]}),this.list.push(a)})},async itemAddedHandler(t){let e;if(t.name="rating-rule-template-"+t.query_name,"templates"===this.$route.name.toLowerCase())e={data:{results:{apiVersion:"rating.smile.fr/v1",kind:"RatingRuleTemplate",metadata:{name:"rating-rule-template-"+t.query_name,namespace:"rating"},spec:{query_name:t.query_name,query_group:t.query_group,query_template:t.query_template}},total:1,errors:!1}};else if("instances"===this.$route.name.toLowerCase()){const a=await l.a.get(`/X-Bi/mockData/templates/get/${t.template_name}.json`);e={data:{results:{apiVersion:"rating.smile.fr/v1",kind:"RatingRuleInstance",metadata:{annotations:{"meta.helm.sh/release-name":"rating","meta.helm.sh/release-namespace":"rating"},creationTimestamp:new Date,generation:1,labels:{"app.kubernetes.io/managed-by":"Helm"},managedFields:[{apiVersion:"rating.smile.fr/v1",fieldsType:"FieldsV1",fieldsV1:{"f:metadata":{"f:annotations":{".":{},"f:meta.helm.sh/release-name":{},"f:meta.helm.sh/release-namespace":{}},"f:labels":{".":{},"f:app.kubernetes.io/managed-by":{}},"f:ownerReferences":{".":{},'k:{"uid":"44c38877-bfca-4310-8c0b-8ea24946871e"}':{}}},"f:spec":{".":{},"f:metric":{},"f:name":{},"f:timeframe":{}}},manager:"Go-http-client",operation:"Update",time:"2024-08-20T13:24:17Z"}],name:"rating-rule-instance-"+t.metric_name,namespace:"rating",ownerReferences:[{apiVersion:"charts.helm.k8s.io/v1",blockOwnerDeletion:!0,controller:!0,kind:"Rating",name:"rating",uid:"44c38877-bfca-4310-8c0b-8ea24946871e"}],resourceVersion:"2787",uid:"d8463449-257f-4e62-82dd-fc634744dca4"},spec:{metric:a.data.results.query_template,name:t.metric_name,timeframe:t.timeframe}},total:1}}}const a=t.name.replace("template-undefined","instance-"+t.metric_name),s=JSON.parse(localStorage.getItem(`x-bi:${this.$route.name}-list`));s.results.push(a),s.total=s.total+1,localStorage.setItem(`x-bi:${this.$route.name}-list`,JSON.stringify(s)),localStorage.setItem("x-bi:"+a,JSON.stringify(e)),await this.getList()}},async beforeMount(){i["titleBoxRender"](this),await this.getList()},watch:{async $route(){i["titleBoxRender"](this),await this.getList()}}}},"9b08":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"normal-case tracking-normal"},[e("a",{staticClass:"btn btn-sm btn-outline-pinterest text-capitalize",on:{click:function(e){return e.preventDefault(),t.show.apply(null,arguments)}}},[e("font-awesome-icon",{staticClass:"me-1",attrs:{icon:["fas","fa-trash-can"]}}),t._v(" Delete")],1),e("modal",{staticClass:"white-space-initial",attrs:{height:"auto",width:"25%",name:"delete-view-"+t.id+t.value,resizable:!0,dialog:!0}},[t.data?t._e():e("div",[e("div",{staticClass:"text-center p-3"},[e("h3",[t._v("Are you sure ?")]),e("p",{staticClass:"text-center"},[t._v("You can't revert your action")])]),e("div",{staticClass:"vue-dialog-buttons"},[e("button",{staticClass:"vue-dialog-button",staticStyle:{flex:"1 1 33.3333%"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.hide.apply(null,arguments)}}},[t._v("Cancel")]),e("button",{staticClass:"vue-dialog-button danger text-danger",staticStyle:{flex:"1 1 33.3333%"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.deleted.apply(null,arguments)}}},[t._v("Delete")])])]),t.data?e("div",{staticClass:"transition"},[e("div",{staticClass:"text-center p-3"},[e("h3",[t._v(" "+t._s(t.data.message.title)+" ")]),e("p",{staticClass:"text-center"},[t._v(t._s(t.data.message.description))])]),e("div",{staticClass:"vue-dialog-buttons"},[e("button",{staticClass:"vue-dialog-button",staticStyle:{flex:"1 1 33.3333%"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.hide.apply(null,arguments)}}},[t._v("Ok")])])]):t._e()])],1)},i=[],r=a("97e3"),n=a("d5a1");const l=n["apiInfo"];var o={name:"delete",props:["id","url","value","refreshFunction"],data(){return{schema:[],model:{},controls:{},data:""}},computed:{},methods:{show(){this.$modal.show("delete-view-"+this.id+this.value)},hide(){this.$modal.hide("delete-view-"+this.id+this.value),this.data="",this.refreshFunction()},deleted(){if("static"===l.dataType){let t=JSON.parse(localStorage.getItem(`x-bi:${this.$route.name}-list`));return t.results=t.results.filter(t=>t!==this.value),t.total=t.total-1,localStorage.setItem(`x-bi:${this.$route.name}-list`,JSON.stringify(t)),void(this.data={result:t,message:{title:"Successfully deleted"}})}r["generalDelete"](this.url,this.id,this.value).then(t=>{this.data=t})}},beforeMount(){}},u=o,c=(a("52d6"),a("2877")),d=Object(c["a"])(u,s,i,!1,null,"386d414d",null);e["default"]=d.exports},ddfe:function(t,e,a){"use strict";a("972b")},de94:function(t,e,a){},ff13:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"normal-case tracking-normal"},[e("a",{staticClass:"btn btn-sm btn-outline-behance text-capitalize",on:{click:function(e){return e.preventDefault(),t.show.apply(null,arguments)}}},[e("font-awesome-icon",{staticClass:"me-1",attrs:{icon:["fas","fa-eye"]}}),t._v(" Show")],1),e("modal",{staticClass:"white-space-initial",attrs:{name:"preview-modal-"+t.id+t.value,height:"auto",resizable:!0,width:"50%"}},[e("div",{staticClass:"modal-body"},[t._t("body",(function(){return[e("h3",{staticClass:"text-capitalize p-2"},[t._v(t._s(t.value+"  display"))]),e("textarea",{ref:"textAreaRef",staticClass:"form-control",attrs:{readonly:"",id:"value",name:"value"}})]}))],2)])],1)},i=[],r=a("97e3"),n=a("56b3"),l=a("d5a1");const o=l["apiInfo"];var u={name:"show",components:{},props:["url","refreshFunction","id","value","data"],data(){return{cmValue:"",cmOption:{tabSize:4,mode:"text/javascript",theme:"eclipse",lineNumbers:!0,line:!0,readOnly:"nocursor"}}},computed:{},mounted(){},methods:{getDate(){const t=JSON.parse(localStorage.getItem("x-bi:"+this.data.name));t?(this.value=this.data.name,this.cmValue=n["fromTextArea"](document.getElementById("value"),this.cmOption),this.cmValue.setValue(JSON.stringify(t.data.results,null,2)),this.cmValue.on("copy",(t,e)=>{e.codemirrorIgnore=!0})):r["getById"](this.url,this.id,this.value,"static"===o.dataType).then(t=>{this.cmValue=n["fromTextArea"](document.getElementById("value"),this.cmOption),this.cmValue.setValue(JSON.stringify(t.data.results,null,2)),this.cmValue.on("copy",(t,e)=>{e.codemirrorIgnore=!0})})},async show(){await this.$modal.show("preview-modal-"+this.id+this.value),this.$nextTick(()=>{this.getDate()})},hide(){this.$modal.hide("preview-modal-"+this.id+this.value)}}},c=u,d=(a("62f5"),a("2877")),m=Object(d["a"])(c,s,i,!1,null,"92f5b2ae",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-6180ff18.63d0edc4.js.map